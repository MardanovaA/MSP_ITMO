<target name="diff" description="commits changes in classes">
<exec executable="git" outputproperty="git_diff_result"> <arg value="diff"/>
               </exec>
               <ac:for list="${difflist}" param="file" keepgoing="true">
                      <sequential>
                             <echo message="Looking whether @{file} has changed"/>
                             <condition property="foundindifflog">
                                    <matches pattern="@{file}" string="${git_diff_result}"/>
                             </condition>
                             <property name="founddiff" value="yes" />
                      </sequential>
</ac:for>
<fail message="Files are not changed." unless="foundindifflog"/> <antcall target="diffcommit" />
</target>
<target name="diffcommit" if="${foundindifflog}"> <echo>Commiting...</echo>
<exec executable="git">
               <arg value="add"/>
<arg value="." /> </exec>
       <exec executable="git">
               <arg value="commit"/>
<arg value="-m 'ant diff'"/> </exec>
</target>